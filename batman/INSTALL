
###################################
B.A.T.M.A.N. Installation and Usage
###################################

Compiling from source
=====================

Pre-requirements
---------------

You need the usual compile environment and the libpthread-library
and the kernel module "tun". Both should already be installed on
your machine, if you use a PC with Linux. On embedded devices
both may not be installed in order to save space. GNU Make is needed
for compilation (currently BSD Make is not cooperating).

The *BSD and Mac OS operating systems are currently unmaintained,
make targets are still available but will most probably not work.
If you're interested in porting and maintaining B.A.T.M.A.N. for
these systems, please contact us. We would appreciate your help.

Compiling
---------

You don't necessarily need to compile. Our download store at
downloads.open-mesh.net likely offers precompiled packages
for your system.

Download and compile the latest stable sources from the download
section http://www.open-mesh.net/wiki/Download by executing eg.:

$ wget http://downloads.open-mesh.net/batman/releases/batman-0.3.1/batman-0.3.1.tar.gz
$ tar xzvf batman-0.3.1.tar.gz
$ cd batmand-0.3.1
$ make

After the compilation process is finished you'll find a executable
file called 'batmand'. This executable is quite big because it is
not stripped. Don't strip it if you want to help us finding a bug
in the daemon. Strip it by executing:

$ strip batmand

Install by executing (as root):

$ make install

Or start it right from the directory where you compiled it by
issuing:

./batmand

See the README file for "getting started" instructions.



Installation on a Freifunk Router
=================================

Just to be sure, there has been some confusion with outdated
batman(d) packages. So its a good idea to check for any old
package by login into your router and executing:

$ ipkg status | grep batman

Remove everything listed by doing for example:

$ ipkg remove batman batman-iii freifunk-batman-de ...

Then continue with the installation of fresh and stable batman packages!

If you use a wireless router based on Freifunk-Firmware or OpenWRT you can
use the ipkg-package management system. Add the line:

 src lui http://freifunk.schmudde.com/ipkg

to your package sources file (/etc/ipkg.conf) and update the list of
available packages by executing:

$ ipkg update
$ ipkg install batmand
$ ipkg install freifunk-batman

If not already installed (or automatically resolved) you may also need to
explicitly install the libpthread and kmod-tun package. Do this by executing:

$ ipkg install libpthread
$ ipkg install kmod-tun

Afterwards, reboot your WRT and check the web interface. You need to enable
batman for one (or several) interfaces and specify the netmask and IP address
as well as other optionally parameters.

Alternatively you can get the latest stable release (as well as development)
versions from http://www.open-mesh.net/wiki/Download

For example to install batmand-0.2 on a freifunk WRT do:

$ ipkg install http://downloads.open-mesh.net/batman/stable/wrt-freifunk/batmand_0.2-current_mipsel-wr-elf-32-lsb-dynamic.ipk

 Be aware that, a recent batmand-...ipk from open-mesh.net
 should be equal to the batmand-...ipk from freifunk.schmudde.com/ipkg.
 Both packages install /usr/sbin/batmand and the last installed
 one will overwrite the previous one.



